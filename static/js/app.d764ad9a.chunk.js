(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{399:function(e,t,n){"use strict";var r,a=n(0),o=n.n(a),i=n(22),c=n.n(i),l=n(5),s=n.n(l),u={loggedInUser:void 0},m=Object(a.createContext)({state:u,dispatch:function(){return null}}),d=n(329),g=n(51),p=n(11),f=n.n(p),h=n(2),y=n(12),b=n(1),E=b.a.create({title:{marginTop:10,fontSize:25,fontWeight:"bold",textAlign:"center"},iconButtonView:{marginTop:5,justifyContent:"center"},loginButtonView:{marginTop:5,justifyContent:"center",marginBottom:5},formContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},waitSpinnerContainer:{height:60,width:300}}),w=n(7),I=n.n(w);!function(e){e.SET_LOGGED_IN_USER="setLoggedInUser"}(r||(r={}));var v={errorTitle:"ERROR IN SIGNUP",errorGeneralContent:"Could not sign up.",errorDuplicateUsernameContent:["Username already exists.","Cannot create several users with same username."],errorDuplicateEmailContent:["Email already exists.","Cannot create several users with the same email."]},C="ERROR IN REMOVING ACCOUNT",O="Something went wrong. Your account cound not be removed.",T="SUCCESS IN REMOVE ACCOUNT",x="Your account has been successfully removed.",S="ERROR IN ADDING NEW ITEM",P="Something went wrong. Item could not be added.",j="SUCCESS IN ADD NEW ITEM",D="The new item has been successfully added.",R=n(117),k=n.n(R),B=function(e){if(!e)throw new Error("No data was returned from the sign up query.");if("boolean"!==typeof e.signUpPerson.success)throw new Error("Response success type must be boolean.");return e.signUpPerson.success?{errorMessage:void 0,loggedInUserData:{id:V(e.signUpPerson.id,"User id"),loginType:"traditional",name:V(e.signUpPerson.username,"Username (for name field)"),jwtToken:V(e.signUpPerson.jwtToken,"Token")}}:{errorMessage:e.signUpPerson.message,loggedInUserData:void 0}},V=function(e,t){if(!e||!A(e))throw new Error("When present, "+t+" must be string.");return e},A=function(e){return"string"===typeof e||e instanceof String};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F={headers:{"Content-Type":"application/json"}},N=n(3),G=n(44),L={primary:{veryLight:"#919191",light:"#6d6d6d",main:"#424242",dark:"#212121",contrast:"#FFFFFF"},secondary:{light:"#efefef",main:"#bdbdbd",dark:"#8d8d8d",contrast:"#000000"},error:"#d50000",success:"#90cc00",facebook:"#4267B2"},W=b.a.create({animatedView:{top:40,left:5,right:5,position:"absolute",padding:5,height:70,borderRadius:6,zIndex:10},errorTheme:{backgroundColor:L.error},successTheme:{backgroundColor:L.success},titleText:{fontWeight:"bold"},notificationView:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}}),z=n(195),H=function(e){var t=e.title,n=e.content,r=e.themeType,i=e.clearNotification,c=Object(a.useState)(new N.a.Value(-75)),l=f()(c,1)[0];Object(a.useEffect)((function(){N.a.sequence([N.a.spring(l,{toValue:0,useNativeDriver:!1}),N.a.delay(5e3),N.a.timing(l,{duration:500,toValue:-75,easing:G.a.ease,useNativeDriver:!1})]).start((function(e){e.finished&&i()}))}),[]);var s="error"===r?W.errorTheme:W.successTheme;return o.a.createElement(N.a.View,{style:[s,W.animatedView,{transform:[{translateY:l}]}]},o.a.createElement(h.a,{style:[W.notificationView]},o.a.createElement(h.a,null,o.a.createElement(y.a,{style:W.titleText,testID:"notification-"+r},t),Array.isArray(n)?n.map((function(e){return o.a.createElement(y.a,{key:e},e)})):o.a.createElement(y.a,null,n)),o.a.createElement(z.a,{icon:"close-circle-outline",onPress:function(){N.a.timing(l,{duration:300,toValue:-75,easing:G.a.ease,useNativeDriver:!1}).start((function(e){e.finished&&i()}))},testID:"notification-close-button"})))},q=n(32),_=b.a.create({container:{flexDirection:"column",justifyContent:"center",alignItems:"center"},infoText:{marginTop:10},underlinedText:{fontSize:18,textDecorationLine:"underline"}}),Y=function(e){var t=e.infoText,n=e.underlinedText,r=e.moveAction;return o.a.createElement(h.a,{style:_.container},o.a.createElement(y.a,{style:_.infoText},t),o.a.createElement(q.a,{onPress:r,testID:"move-to-touchable"},o.a.createElement(y.a,{style:_.underlinedText,testID:"move-to-"+n},n)))},$=n(225),X=n(85),K=n(23),Q=b.a.create({input:{height:40,fontSize:16,width:.8*K.a.get("window").width},inputMultiline:{fontSize:16,width:.8*K.a.get("window").width},inputContainer:{marginTop:5},error:{color:L.error}}),J=n(326),Z=function(e){return""!==e&&e.length>=3&&e.length<=35},ee=function(e){return""!==e&&e.length>=3&&e.length<=300},te=function(e){return e.length>=1&&e.length<=35},ne=function(e,t,n,r,a){return!(!a||!a.clientUrl)&&(!!Z(e)&&(!!ee(t)&&(""!==r&&!(""!==n&&!te(n)))))},re={username:"",password:"",passwordConfirm:"",email:"",itemTitle:"",itemDescription:"",itemBrand:"",searchTitle:"e.g. table, sofa, chair",searchDescription:"e.g. living room, white, like new",searchBrand:"e.g. Interface, Pohjanmaan",matchPost:"Type a new message here..."},ae={username:"Username",password:"Password",passwordConfirm:"Confirm password",email:"Email (optional, for password reset purpose)",itemTitle:"Give a short title (e.g. bread maker, microwave oven)",itemDescription:"Describe the item shortly (e.g. color, condition)",itemBrand:"Brand and possible model (optional)",searchTitle:"",searchDescription:"",searchBrand:"",matchPost:""},oe={username:"Username",password:"Password",passwordConfirm:"Confirm password",email:"Email (optional, for password reset purpose)",itemTitle:"Title ("+3+"-"+35+" characters) is required",itemDescription:"Description ("+3+"-"+300+" characters) is required",itemBrand:"Brand ("+1+"-"+35+" characters) is required",searchTitle:"",searchDescription:"",searchBrand:"",matchPost:"Message must be at least 1 characters long!"},ie=function(e){var t=e.target,n=e.value,r=e.handleValueChange,a=e.isEditable,i=e.isVisible,c=e.error;return o.a.createElement(h.a,{style:Q.inputContainer},o.a.createElement(y.a,{style:"RED_TITLE"===c?{color:L.error}:null,testID:"FormTextInputLabel-"+t},"RED_TITLE"===c?oe[t]:ae[t]),o.a.createElement(J.a,{value:n,onChangeText:r,placeholder:re[t],blurOnSubmit:!0,editable:a,autoCapitalize:"none",multiline:"matchPost"===t,numberOfLines:"matchPost"===t?3:1,autoCorrect:!1,secureTextEntry:!i,textContentType:"oneTimeCode",style:"matchPost"===t?Q.inputMultiline:Q.input,mode:"outlined",theme:{colors:{text:L.primary.main,primary:L.primary.main}},testID:"FormTextInputInput-"+t}),c&&"RED_TITLE"!==c&&o.a.createElement(y.a,{style:Q.error,testID:"error-"+t},c))},ce=n(106),le=n(227),se=n(80),ue=b.a.create({container:{flex:1,justifyContent:"center",alignItems:"center"},waitText:{marginTop:5}}),me=function(){return o.a.createElement(h.a,{style:ue.container},o.a.createElement(se.a,{size:"large",color:L.primary.main}),o.a.createElement(y.a,{style:ue.waitText},"Loading, please wait..."))},de=function(e){var t=e.submitSignUp,n=e.submitting,r=e.submitAllowed,i=Object(a.useState)(!1),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useState)(!1),m=f()(u,2),d=m[0],g=m[1],p=X.a({username:X.c().min(3,"Username must be at least 3 characters long").required("Required"),password:X.c().min(8,"Password must be at least 8 characters long").required("Required"),passwordConfirm:X.c().oneOf([X.b("password")],"Passwords must match").required("Required"),email:X.c().email("Email must be a proper email")});return o.a.createElement($.a,{initialValues:{username:"",password:"",passwordConfirm:"",email:""},validationSchema:p,onSubmit:function(e){return t(e)},validateOnChange:l,validateOnBlur:l},(function(e){var t=e.values,a=e.handleChange,i=e.errors,c=e.handleSubmit;return o.a.createElement(h.a,{style:E.formContainer},o.a.createElement(h.a,null,o.a.createElement(ie,{target:"username",value:t.username,handleValueChange:a("username"),isEditable:!n,isVisible:!0,error:i.username}),o.a.createElement(ie,{target:"password",value:t.password,handleValueChange:a("password"),isEditable:!n,isVisible:d,error:i.password}),o.a.createElement(ie,{target:"passwordConfirm",value:t.passwordConfirm,handleValueChange:a("passwordConfirm"),isEditable:!n,isVisible:d,error:i.passwordConfirm}),o.a.createElement(ie,{target:"email",value:t.email,handleValueChange:a("email"),isEditable:!n,isVisible:!0,error:i.email})),o.a.createElement(h.a,{style:E.iconButtonView},o.a.createElement(ce.a,{icon:d?"eye-off":"eye",color:L.primary.main,onPress:function(){return g(!d)}})),o.a.createElement(h.a,{style:E.loginButtonView},o.a.createElement(le.a,{icon:"send",mode:"contained",onPress:function(){l||s(!0),c()},disabled:!r,color:L.primary.main,testID:"submit-sign-up"},"SIGN UP")),o.a.createElement(h.a,{style:E.waitSpinnerContainer},n&&o.a.createElement(me,null)))}))},ge=n(26),pe=b.a.create({logoContainer:{marginTop:30,flexDirection:"column",justifyContent:"center",alignItems:"center"},image:{width:220,height:50}}),fe=function(){var e=n(592);return o.a.createElement(h.a,{style:pe.logoContainer},null!==e&&o.a.createElement(ge.a,{resizeMode:"contain",source:{uri:e},style:pe.image}))},he=function(e){var t=e.changePageToShow,n=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],o=t[1],i=Object(a.useState)(void 0),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useContext)(m).dispatch;return{submitting:n,submitSignUp:function(e){var t,n,a,i,c;return I.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return o(!0),t={username:e.username,password:e.password},e.email&&(t=U(U({},t),{},{email:e.email})),l.prev=3,l.next=6,I.a.awrap(k.a.post("https://swaplings.herokuapp.com/graphql",{query:"\nmutation signUpPerson($signUpInput: SignUpInput!) {\n    signUpPerson(signUpInput: $signUpInput) {\n        code\n        success\n        message\n        id\n        username\n        facebookName\n        jwtToken\n    }\n}\n",variables:{signUpInput:t}},F));case 6:if(n=l.sent,a=n.data,!(i=B(a.data)).errorMessage){l.next=11;break}throw new Error(i.errorMessage);case 11:u({type:r.SET_LOGGED_IN_USER,data:i.loggedInUserData}),l.next=23;break;case 14:l.prev=14,l.t0=l.catch(3),console.log(l.t0),c="error",l.t0.toString().includes("Duplicate email")&&(c="duplicateEmail"),l.t0.toString().includes("Duplicate username")&&(c="duplicateUsername"),s({title:v.errorTitle,content:"error"===c?v.errorGeneralContent:"duplicateUsername"===c?v.errorDuplicateUsernameContent:v.errorDuplicateEmailContent,themeType:"error",clearNotification:function(){return s(void 0)}}),o(!1);case 23:case"end":return l.stop()}}),null,null,[[3,14]],Promise)},notification:l}}(),i=n.submitting,c=n.submitSignUp,l=n.notification;return o.a.createElement(h.a,null,void 0!==l&&o.a.createElement(H,l),o.a.createElement(fe,null),o.a.createElement(y.a,{style:E.title,testID:"title-sign-up"},"SIGN UP"),o.a.createElement(de,{submitSignUp:c,submitting:i,submitAllowed:!i&&void 0===l}),o.a.createElement(Y,{infoText:"Already have an account?",moveAction:function(){return t("login")},underlinedText:"LOGIN"}))},ye=b.a.create({title:{marginTop:10,fontSize:25,fontWeight:"bold",textAlign:"center"},iconButtonView:{marginTop:5,justifyContent:"center"},loginButtonView:{marginTop:5,justifyContent:"center",marginBottom:10},formContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},waitSpinnerContainer:{height:70,width:300},infoText:{marginTop:25,marginBottom:5},facebookButtonContainer:{marginTop:10},image:{width:100,height:100}}),be=function(e){if(!e)throw new Error("No data was returned from the login query.");if("boolean"!==typeof e.loginPerson.success)throw new Error("Response success type must be boolean.");return e.loginPerson.success?{errorMessage:void 0,loggedInUserData:{id:Ee(e.loginPerson.id,"User id"),loginType:"traditional",name:Ee(e.loginPerson.username,"Username (for field name)"),jwtToken:Ee(e.loginPerson.jwtToken,"Token")}}:{errorMessage:e.loginPerson.message,loggedInUserData:void 0}},Ee=function(e,t){if(!e||!we(e))throw new Error("When present, "+t+" must be string.");return e},we=function(e){return"string"===typeof e||e instanceof String},Ie=function(e){if(!e)throw new Error("No data was returned from the Facebook login query.");if("boolean"!==typeof e.facebookLogin.success)throw new Error("Response success type must be boolean.");return e.facebookLogin.success?{errorMessage:void 0,loggedInUserData:{id:ve(e.facebookLogin.id,"User id"),loginType:"facebook",name:ve(e.facebookLogin.facebookName,"Facebook name (for field name)"),jwtToken:ve(e.facebookLogin.jwtToken,"Token")}}:{errorMessage:e.facebookLogin.message,loggedInUserData:void 0}},ve=function(e,t){if(!e||!Ce(e))throw new Error('When present, "'+t+'" must be string.');return e},Ce=function(e){return"string"===typeof e||e instanceof String},Oe={headers:{"Content-Type":"application/json"}},Te=n(299),xe=n(258),Se=function(e){var t=e.submitFacebookLogin,n=e.setNotification,r=e.isDisabled;return o.a.createElement(h.a,{style:ye.facebookButtonContainer},o.a.createElement(Te.a,{mode:"contained",onPress:function(){var e,r;return I.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I.a.awrap(xe.a({appId:"3013384772227109"}));case 3:return a.next=5,I.a.awrap(xe.b({permissions:["public_profile"]}));case 5:if(e=a.sent,"success"!==(r=e).type){a.next=10;break}return a.next=10,I.a.awrap(t(r.token,r.userId));case 10:a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log("error",a.t0),n({title:"ERROR IN FACEBOOK LOGIN",content:"Something went wrong. Could not login with Facebook.",themeType:"error",clearNotification:function(){return n(void 0)}});case 16:case"end":return a.stop()}}),null,null,[[0,12]],Promise)},disabled:r,color:L.facebook},"LOGIN WITH FACEBOOK"))},Pe=function(e){var t=e.submitting,n=e.submitLogin,r=e.notification,i=Object(a.useState)(!1),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useState)(!1),m=f()(u,2),d=m[0],g=m[1],p=X.a({username:X.c().min(3,"Username must be at least 3 characters long").required("Required"),password:X.c().min(8,"Password must be at least 8 characters long").required("Required")});return o.a.createElement($.a,{initialValues:{username:"",password:""},validationSchema:p,onSubmit:function(e){return n(e)},validateOnChange:l,validateOnBlur:l},(function(e){var n=e.values,a=e.handleChange,i=e.errors,c=e.handleSubmit;return o.a.createElement(h.a,{style:ye.formContainer},o.a.createElement(h.a,null,o.a.createElement(ie,{target:"username",value:n.username,handleValueChange:a("username"),isEditable:!t,isVisible:!0,error:i.username}),o.a.createElement(ie,{target:"password",value:n.password,handleValueChange:a("password"),isEditable:!t,isVisible:d,error:i.password})),o.a.createElement(h.a,{style:ye.iconButtonView},o.a.createElement(ce.a,{icon:d?"eye-off":"eye",color:L.primary.main,onPress:function(){return g(!d)}})),o.a.createElement(h.a,{style:ye.loginButtonView},o.a.createElement(le.a,{icon:"send",mode:"contained",onPress:function(){l||s(!0),c()},disabled:t||void 0!==r,color:L.primary.main,testID:"submit-login"},"LOGIN")))}))},je=function(e){var t=e.changePageToShow,n=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],o=t[1],i=Object(a.useState)(void 0),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useContext)(m).dispatch;return{submitting:n,submitLogin:function(e){var t,n,a;return I.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return o(!0),i.prev=1,i.next=4,I.a.awrap(k.a.post("https://swaplings.herokuapp.com/graphql",{query:"\n    mutation loginPerson($loginInput: LoginInput!) {\n        loginPerson(loginInput: $loginInput) {\n            code\n            success\n            message\n            id\n            username\n            facebookName\n            jwtToken\n        }\n    }\n",variables:{loginInput:{username:e.username,password:e.password}}},Oe));case 4:if(t=i.sent,n=t.data,!(a=be(n.data)).errorMessage){i.next=9;break}throw new Error(a.errorMessage);case 9:u({type:r.SET_LOGGED_IN_USER,data:a.loggedInUserData}),i.next=16;break;case 12:i.prev=12,i.t0=i.catch(1),o(!1),s({title:"ERROR IN LOGIN",content:"Could not login.",themeType:"error",clearNotification:function(){return s(void 0)}});case 16:case"end":return i.stop()}}),null,null,[[1,12]],Promise)},submitFacebookLogin:function(e,t){var n,a,i,c;return I.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return o(!0),n={userId:t,facebookAccessToken:e},l.prev=2,l.next=5,I.a.awrap(k.a.post("https://swaplings.herokuapp.com/graphql",{query:"\n    mutation facebookLogin($facebookLoginInput: FacebookLoginInput!) {\n        facebookLogin(facebookLoginInput: $facebookLoginInput) {\n            code\n            success\n            message\n            id\n            username\n            facebookName\n            jwtToken\n        }\n    }\n",variables:{facebookLoginInput:n}},Oe));case 5:if(a=l.sent,i=a.data,!(c=Ie(i.data)).errorMessage){l.next=10;break}throw new Error(c.errorMessage);case 10:u({type:r.SET_LOGGED_IN_USER,data:c.loggedInUserData}),l.next=17;break;case 13:l.prev=13,l.t0=l.catch(2),o(!1),s({title:"ERROR IN FACEBOOK LOGIN",content:"Something went wrong. Could not login with Facebook.",themeType:"error",clearNotification:function(){return s(void 0)}});case 17:case"end":return l.stop()}}),null,null,[[2,13]],Promise)},notification:l,setNotification:s}}(),i=n.submitting,c=n.submitLogin,l=n.submitFacebookLogin,s=n.notification,u=n.setNotification;return o.a.createElement(h.a,{style:ye.formContainer,testID:"title-login"},void 0!==s&&o.a.createElement(H,s),o.a.createElement(fe,null),o.a.createElement(y.a,{style:ye.title},"LOGIN"),o.a.createElement(Pe,{submitLogin:c,submitting:i,notification:s}),o.a.createElement(h.a,{style:ye.waitSpinnerContainer},i?o.a.createElement(me,null):o.a.createElement(Se,{submitFacebookLogin:l,setNotification:u,isDisabled:i||void 0!==s})),o.a.createElement(Y,{infoText:"No account yet?",moveAction:function(){return t("signup")},underlinedText:"SIGN UP"}))},De=function(){var e=Object(a.useState)("login"),t=f()(e,2),n=t[0],r=t[1],i=function(e){r(e)};return"login"===n?o.a.createElement(je,{changePageToShow:i}):o.a.createElement(he,{changePageToShow:i})},Re=n(24),ke=n(397),Be=n(654),Ve=b.a.create({cameraView:{backgroundColor:"transparent",width:K.a.get("window").width,height:K.a.get("window").height,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center"},cameraButtonsView:{flexDirection:"row",justifyContent:"center",alignItems:"center"},previewImageView:{backgroundColor:"transparent",width:Math.min(K.a.get("window").width,K.a.get("window").height),height:Math.min(K.a.get("window").width,K.a.get("window").height),display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center"},previewButtonsView:{flexDirection:"row",justifyContent:"center",alignItems:"center"},previewImageViewContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",height:K.a.get("window").height,backgroundColor:"#000000"}}),Ae=function(e){var t=e.action,n=e.type,r={flip:{name:"camera-switch",color:"#FFFFFF",backgroundColor:"#000000"},snap:{name:"camera-enhance",color:"#FFFFFF",backgroundColor:"#000000"},cancel:{name:"keyboard-return",color:"#000000",backgroundColor:"#FFFFFF"},remove:{name:"delete-forever",color:"#000000",backgroundColor:"#FFFFFF"},save:{name:"content-save",color:"#000000",backgroundColor:"#FFFFFF"}};return o.a.createElement(z.a,{icon:r[n].name,color:r[n].color,size:40,style:{backgroundColor:r[n].backgroundColor},onPress:t})},Me=function(e){var t=e.setPhoto,n=Object(a.useState)(void 0),r=f()(n,2),i=r[0],c=r[1],l=Object(a.useState)(Be.a.Constants.Type.front),s=f()(l,2),u=s[0],m=s[1],d=Object(a.useState)(null),g=f()(d,2),p=g[0],b=g[1];if(Object(a.useEffect)((function(){!function(){var e,t;I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I.a.awrap(Be.a.requestPermissionsAsync());case 2:e=n.sent,t=e.status,c("granted"===t);case 5:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]),void 0===i)return o.a.createElement(me,null);if(!1===i)return o.a.createElement(y.a,null,"No access to camera");return o.a.createElement(Be.a,{style:{flex:1},type:u,ref:function(e){return b(e)}},o.a.createElement(h.a,{style:Ve.cameraView},o.a.createElement(h.a,{style:Ve.cameraButtonsView},o.a.createElement(Ae,{action:function(){var e=Be.a.Constants.Type.back?Be.a.Constants.Type.front:Be.a.Constants.Type.back;m(e)},type:"flip"}),o.a.createElement(Ae,{action:function(){var e;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!p){n.next=6;break}return n.next=3,I.a.awrap(p.takePictureAsync());case 3:e=n.sent,console.log("photo",e),t(e);case 6:case"end":return n.stop()}}),null,null,null,Promise)},type:"snap"}))))},Ue=function(e){var t=e.photo,n=e.declinePhoto,r=e.cancelTakingPhoto,a=e.savePhoto;return o.a.createElement(h.a,{style:Ve.previewImageViewContainer},o.a.createElement(ge.a,{style:Ve.previewImageView,source:{uri:t.uri}}),o.a.createElement(h.a,{style:Ve.previewButtonsView},o.a.createElement(Ae,{action:n,type:"remove"}),o.a.createElement(Ae,{action:r,type:"cancel"}),o.a.createElement(Ae,{action:a,type:"save"})))},Fe=n(362);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le,We,ze=function(e){var t=e;return{publicId:He(t.public_id,"Uploaded image public id"),secureUrl:He(t.secure_url,"Uploaded image secure url"),clientUrl:void 0}},He=function(e,t){if(!e||!qe(e))throw new Error("When present, "+t+" must be string.");return e},qe=function(e){return"string"===typeof e||e instanceof String},_e=n(27),Ye=Object(Re.makeVar)(void 0),$e=Object(Re.makeVar)(void 0),Xe=Object(Re.makeVar)(void 0),Ke={matchToHandleVar:$e,selectedMatchVar:Xe},Qe=function(){var e=Object(_e.useNavigation)(),t=Object(a.useState)(void 0),n=f()(t,2),r=n[0],i=n[1],c=function(){var e=Object(a.useContext)(m).state.loggedInUser;return{uploadPhoto:function(t){var n,r,a,o,i;return I.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!e||!e.jwtToken){c.next=15;break}return n=new FormData,t&&t.uri&&(r=Object(Fe.a)(t.uri),n.append("image",r)),a={headers:{authorization:e.jwtToken,"content-type":"multipart/form-data"}},c.prev=4,c.next=7,I.a.awrap(k.a.post("https://swaplings.herokuapp.com/upload",n,a));case 7:return o=c.sent,i=ze(o.data),c.abrupt("return",Ge(Ge({},i),{},{clientUrl:t.uri}));case 12:c.prev=12,c.t0=c.catch(4),console.log("error",c.t0);case 15:return c.abrupt("return",void 0);case 16:case"end":return c.stop()}}),null,null,[[4,12]],Promise)}}}().uploadPhoto,l=function(t){Ye(t),e.navigate("Add")};return o.a.createElement(h.a,null,r?o.a.createElement(Ue,{photo:r,declinePhoto:function(){return i(void 0)},cancelTakingPhoto:function(){e.navigate("Add")},savePhoto:function(){var e;return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||!r.uri){t.next=5;break}return t.next=3,I.a.awrap(c(r));case 3:(e=t.sent)&&l(e);case 5:case"end":return t.stop()}}),null,null,null,Promise)}}):o.a.createElement(Me,{setPhoto:i}))},Je=n(653),Ze=n(655),et=n(69),tt=b.a.create({homeScreen:{height:K.a.get("screen").height-50,bottom:0},pageTitle:{marginTop:60,fontSize:25,fontWeight:"bold",textAlign:"center",marginBottom:5},subtitle:{marginTop:20,fontSize:20,fontWeight:"bold"},infoText:{textAlign:"center"},myItemsContainer:{marginLeft:10,marginTop:10,marginRight:10,flex:1,flexGrow:1},myItemButtonContainer:{backgroundColor:L.primary.dark,borderRadius:6,padding:5,flexDirection:"row",justifyContent:"space-between"},itemImageButton:{backgroundColor:L.primary.dark,width:100,height:100},imageView:{width:100,height:100,borderRadius:8},iconView:{backgroundColor:L.primary.dark,flexDirection:"column",justifyContent:"center",alignItems:"center"},itemDetailsContainer:{flexDirection:"column",alignContent:"flex-start",marginLeft:12},myItemTitle:{fontWeight:"bold",marginBottom:8,color:L.primary.contrast},myItemTitleDelete:{fontWeight:"bold",marginBottom:2,color:"#FFFFFF"},matchText:{fontWeight:"bold",color:L.primary.contrast},text:{color:L.primary.contrast},scrollView:{marginTop:10,flex:1,flexGrow:1},deleteButtonContainer:{width:85,flexDirection:"column",justifyContent:"center",alignItems:"center"},deleteIconsContainer:{borderRadius:6,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:L.primary.light,padding:10},deleteButton:{height:40,width:40,backgroundColor:L.error,borderRadius:6},deleteView:{backgroundColor:L.error,position:"absolute",borderRadius:6,flexDirection:"row",justifyContent:"space-between",width:"100%",height:"100%",padding:5},deleteIconContainer:{borderRadius:30,height:30,width:30,margin:5}}),nt=n(57),rt=n.n(nt),at=Object(Re.gql)(Le||(Le=rt()(["\n    query myItems {\n        myItems {\n            id\n            title\n            priceGroup\n            description\n            brand\n            imagePublicId\n            imageSecureUrl\n            matchedTo {\n                id\n                title\n                priceGroup\n                description\n                brand\n                imagePublicId\n                imageSecureUrl\n            }\n            matchedFrom {\n                id\n                title\n                priceGroup\n                description\n                brand\n                imagePublicId\n                imageSecureUrl\n            }\n        }\n    }\n"]))),ot=n(4),it=n.n(ot),ct=n(70),lt=n(88),st=n(126),ut=function(e){var t=e.displayTitle,n=e.myItem,r=e.cancelShowDeleteView,a=e.isConfirmed,i=e.setIsConfirmed;return o.a.createElement(h.a,{style:tt.deleteView},n.imageSecureUrl?o.a.createElement(ge.a,{source:{uri:n.imageSecureUrl},style:tt.imageView}):o.a.createElement(h.a,{style:[tt.imageView,tt.iconView]},o.a.createElement(ce.a,{icon:"image-edit",color:"#FFFFFF",size:90,style:tt.itemImageButton,disabled:!0})),o.a.createElement(h.a,{style:tt.itemDetailsContainer},o.a.createElement(y.a,{style:tt.myItemTitleDelete},"DELETE ITEM"),o.a.createElement(y.a,{style:tt.myItemTitleDelete},t.toLocaleUpperCase()),o.a.createElement(y.a,{style:tt.text},"All the data related to this item"),o.a.createElement(y.a,{style:tt.text},"will be permanently removed."),o.a.createElement(st.a,{title:"I want to proceed.",checked:a,onPress:function(){return i(!a)},checkedColor:"#FFFFFF",textStyle:{fontWeight:"normal",color:"#FFFFFF"},containerStyle:{backgroundColor:"transparent",borderWidth:0,marginLeft:-10,marginTop:-8}})),o.a.createElement(h.a,{style:tt.deleteButtonContainer},o.a.createElement(q.a,{style:tt.deleteIconContainer,onPress:r},o.a.createElement(ct.default,{name:"keyboard-return",size:35,color:"#FFFFFF"})),o.a.createElement(q.a,{style:tt.deleteIconContainer,onPress:function(){return console.log("deletoi")}},o.a.createElement(ct.default,{name:"delete-forever",size:35,color:a?"#FFFFFF":L.primary.light}))))},mt=K.a.get("window").width,dt=.35*mt,gt=function(e){var t=e.myItem,n=Object(a.useState)(!1),r=f()(n,2),i=r[0],c=r[1],l=Object(a.useState)(!1),s=f()(l,2),u=s[0],m=s[1],d=Object(_e.useNavigation)(),g=Ke.selectedMatchVar,p=Ke.matchToHandleVar,b=Object(a.useRef)(new N.a.ValueXY({x:0,y:0})).current,E=function(e,t,n,r){return Object(a.useRef)(lt.a.create({onStartShouldSetPanResponder:function(e,t){return!0},onPanResponderMove:function(t,n){e.setValue({x:n.dx,y:0})},onPanResponderRelease:function(a,o){-o.dx>t?N.a.timing(e,{toValue:-n,useNativeDriver:!0,duration:300}).start((function(){r(!0)})):N.a.timing(e,{toValue:0,useNativeDriver:!0,duration:300}).start()}})).current}(b,dt,mt,c),w=function(e){var t=[],n=[],r=[];return e.matchedFrom.forEach((function(r){var a,o=!1,i={id:r.id,title:r.title,imageSecureUrl:null!=(a=r.imageSecureUrl)?a:""};e.matchedTo.forEach((function(e){r.id===e.id&&(t.push(i),o=!0)})),o||n.push(i)})),e.matchedTo.forEach((function(e){var n;t.every((function(t){return t.id!==e.id}))&&r.push({id:e.id,title:e.title,imageSecureUrl:null!=(n=e.imageSecureUrl)?n:""})})),{matches:t,matchedFrom:n,matchedTo:r}}(t),I=w.matches,v=w.matchedFrom,C=w.matchedTo,O=t.title.length>25?t.title.substring(0,25)+"...":t.title;return o.a.createElement(q.a,{onPress:function(){var e;g(void 0),p({mode:"MY",item:{id:t.id,title:t.title,imageSecureUrl:null!=(e=t.imageSecureUrl)?e:""},matches:I,matchedFrom:v,matchedTo:C}),d.navigate("Match")},style:{marginBottom:5},disabled:i,testID:"my-item-"+t.id},o.a.createElement(h.a,null,o.a.createElement(ut,{displayTitle:O,myItem:t,isConfirmed:u,setIsConfirmed:m,cancelShowDeleteView:function(){N.a.timing(b,{toValue:0,useNativeDriver:!0,duration:500}).start((function(){c(!1),m(!1)}))}}),o.a.createElement(N.a.View,it()({style:{transform:[{translateX:b.x}]}},E.panHandlers),o.a.createElement(h.a,{style:tt.myItemButtonContainer},t.imageSecureUrl?o.a.createElement(ge.a,{source:{uri:t.imageSecureUrl},style:tt.imageView}):o.a.createElement(h.a,{style:[tt.imageView,tt.iconView]},o.a.createElement(ce.a,{icon:"image-edit",color:"#FFFFFF",size:90,style:tt.itemImageButton,disabled:!0})),o.a.createElement(h.a,{style:tt.itemDetailsContainer},o.a.createElement(y.a,{style:tt.myItemTitle},O.toLocaleUpperCase()),o.a.createElement(y.a,{style:tt.matchText},I.length+"    "+(1===I.length?"MATCH":"MATCHES")),o.a.createElement(y.a,{style:tt.text},v.length+"    "+(1===v.length?"request":"requests")+" by others"),o.a.createElement(y.a,{style:tt.text},C.length+"    "+(1===C.length?"proposal":"proposals")+" by me")),o.a.createElement(h.a,{style:tt.deleteButtonContainer},o.a.createElement(ct.default,{name:"delete-sweep",size:35,color:L.primary.contrast}))))))},pt=function(){var e=Object(Re.useQuery)(at),t=e.loading,n=e.error,r=e.data,i=Object(a.useState)(!1),c=f()(i,2),l=c[0],s=c[1];return t?o.a.createElement(me,null):n||!r?(s(!0),o.a.createElement(h.a,{testID:"home-page"},l&&o.a.createElement(H,{title:"ERROR",content:"Something went wrong. Could not fetch items data.",themeType:"error",clearNotification:function(){return s(!1)}}))):o.a.createElement(h.a,{style:tt.homeScreen,testID:"home-page"},o.a.createElement(h.a,{style:tt.myItemsContainer},o.a.createElement(y.a,{style:tt.pageTitle,testID:"title-my-items"},"MY ITEMS"),r.myItems.length>4&&o.a.createElement(y.a,{style:tt.infoText},"Scroll down to view all items."),r.myItems.length>0&&o.a.createElement(y.a,{style:tt.infoText},"Tap an item button to view item details."),r.myItems.length>0?o.a.createElement(h.a,{style:tt.scrollView},o.a.createElement(et.a,{testID:"my-items-scroll-view"},r.myItems.map((function(e){return o.a.createElement(gt,{key:e.id,myItem:e})})))):o.a.createElement(y.a,{style:tt.infoText},"There are no items yet.")))},ft=K.a.get("window").width,ht=K.a.get("window").height,yt=.3*ft,bt=.8*ft,Et=.65*ht,wt={x:(ft-bt)/2,y:0},It={x:wt.x-bt-10,y:0},vt={x:wt.x-2*(bt+10),y:0},Ct={x:wt.x+bt+10,y:0},Ot={x:wt.x+2*(bt+10),y:0},Tt=b.a.create({browseContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},pageTitle:{marginTop:60,fontSize:25,fontWeight:"bold",textAlign:"center"},pickPriceGroupsButtonsContainer:{flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",marginTop:5},pickButton:{marginRight:5,borderColor:L.primary.light,borderWidth:1},subtitle:{marginTop:10,fontSize:20,fontWeight:"bold"},paleText:{color:L.primary.veryLight},priceGroupTitle:{marginTop:8,fontWeight:"bold"},groupTitle:{marginTop:8,fontWeight:"bold",marginBottom:-10},searchCriteriaContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:20},star:{fontWeight:"bold",marginRight:5},rowContainer:{flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",marginTop:8},submitButtonContainer:{marginTop:10,width:.8*K.a.get("window").width},cancelButtonContainer:{marginTop:10,width:.4*K.a.get("window").width},fetchMoreContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:10+Et},noItemsText:{fontWeight:"bold"},noItemsContainer:{marginTop:20}});!function(e){e.GROUP_1="0-50",e.GROUP_2="50-250",e.GROUP_3=">250"}(We||(We={}));var xt=[{groupEnum:We.GROUP_1,text:"0 - 50 \u20ac"},{groupEnum:We.GROUP_2,text:"50 - 250 \u20ac"},{groupEnum:We.GROUP_3,text:"> 250 \u20ac"}],St=function(e){var t=e.selectedPriceGroups,n=e.priceGroupSelectionChanged,r=e.disabled,a=L.primary.main;return o.a.createElement(h.a,{style:Tt.pickPriceGroupsButtonsContainer},xt.map((function(e){return o.a.createElement(Te.a,{key:e.text+"pick-button",mode:"contained",onPress:function(){return n(e.groupEnum)},disabled:r,color:t.includes(e.groupEnum)?a:"#efebe9",style:Tt.pickButton},e.text)})))};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt,Rt,kt,Bt=function(e){var t=e.searchTerms,n=e.searchCriteriaChanged,r=e.setShowSetSearchCriteria,i=Object(a.useState)(t&&t.priceGroups?t.priceGroups:[]),l=f()(i,2),s=l[0],u=l[1],m=Object(a.useState)(t&&t.phrasesInTitle?t.phrasesInTitle.join(","):""),d=f()(m,2),g=d[0],p=d[1],b=Object(a.useState)(t&&t.phrasesInDescription?t.phrasesInDescription.join(","):""),E=f()(b,2),w=E[0],I=E[1],v=Object(a.useState)(t&&t.brands?t.brands.join(","):""),C=f()(v,2),O=C[0],T=C[1];return o.a.createElement(h.a,{style:Tt.searchCriteriaContainer},o.a.createElement(h.a,null,o.a.createElement(y.a,{style:Tt.subtitle},"SET SEARCH CRITERIA"),o.a.createElement(y.a,{style:Tt.paleText},"No criteria? Just hit the SEARCH button.")),o.a.createElement(h.a,null,o.a.createElement(y.a,{style:Tt.priceGroupTitle},"PRICE GROUP"),o.a.createElement(y.a,{style:Tt.paleText},"How valuable items would you like to view?"),o.a.createElement(y.a,{style:Tt.paleText},"Pick any combination of price groups you like."),o.a.createElement(St,{selectedPriceGroups:s,priceGroupSelectionChanged:function(e){s.includes(e)?u(s.filter((function(t){return t!==e}))):u([].concat(c()(s),[e]))},disabled:!1}),o.a.createElement(y.a,{style:Tt.groupTitle},"TITLE *"),o.a.createElement(ie,{target:"searchTitle",value:g,handleValueChange:function(e){return p(e)},isEditable:!0,isVisible:!0}),o.a.createElement(y.a,{style:Tt.groupTitle},"DESCRIPTION *"),o.a.createElement(ie,{target:"searchDescription",value:w,handleValueChange:function(e){return I(e)},isEditable:!0,isVisible:!0}),o.a.createElement(y.a,{style:Tt.groupTitle},"BRAND *"),o.a.createElement(ie,{target:"searchBrand",value:O,handleValueChange:function(e){return T(e)},isEditable:!0,isVisible:!0}),o.a.createElement(h.a,{style:Tt.rowContainer},o.a.createElement(y.a,{style:[Tt.star,Tt.paleText]},"*"),o.a.createElement(h.a,null,o.a.createElement(y.a,{style:Tt.paleText},"List comma-separated search terms as input."),o.a.createElement(y.a,{style:Tt.paleText},"The search will return items that contain at least "),o.a.createElement(y.a,{style:Tt.paleText},"one of the search terms present in each of the"),o.a.createElement(y.a,{style:Tt.paleText},"lists you specify."))),o.a.createElement(h.a,{style:Tt.submitButtonContainer},o.a.createElement(Te.a,{icon:"text-box-search-outline",mode:"contained",onPress:function(){var e={};s.length>0&&(e={priceGroups:s}),""!==g&&(e=jt(jt({},e),{},{phrasesInTitle:g.split(",").map((function(e){return e.trim()}))})),""!==w&&(e=jt(jt({},e),{},{phrasesInDescription:w.split(",").map((function(e){return e.trim()}))})),""!==O&&(e=jt(jt({},e),{},{brands:O.split(",").map((function(e){return e.trim()}))})),n(e)},disabled:!1,color:L.primary.main},"SEARCH")),(s.length>0||""!==g||""!==w||""!==O)&&o.a.createElement(h.a,{style:Tt.submitButtonContainer},o.a.createElement(Te.a,{icon:"delete-forever",mode:"contained",onPress:function(){u([]),p(""),I(""),T("")},disabled:!1,color:L.primary.main},"CLEAR ALL"))),void 0!==t&&o.a.createElement(h.a,{style:Tt.cancelButtonContainer},o.a.createElement(Te.a,{icon:"keyboard-return",mode:"contained",onPress:function(){return r(!1)},disabled:!1,color:L.primary.light},"CANCEL")))},Vt=Object(Re.gql)(Dt||(Dt=rt()(["\n    query browseItemsByPage($browseItemsByPageInput: BrowseItemsByPageInput!) {\n        browseItemsByPage(browseItemsByPageInput: $browseItemsByPageInput) {\n            edges {\n                cursor\n                node {\n                    id\n                    title\n                    priceGroup\n                    description\n                    brand\n                    imagePublicId\n                    imageSecureUrl                    \n                }\n            }\n            pageInfo {\n                endCursor\n                hasNextPage\n            }\n        }\n    }\n"]))),At=Object(Re.gql)(Rt||(Rt=rt()(["\n            query MyItemsInCache {\n                myItems {\n                    id\n                    priceGroup\n                    imageSecureUrl\n                    matchedTo {\n                        id\n                    }\n                    matchedFrom {\n                        id\n                    }\n                }\n            }\n        "]))),Mt=(Object(Re.gql)(kt||(kt=rt()(["\n            query MyItemsInCache {\n                myItems {\n                    id\n                    title\n                    priceGroup\n                    imageSecureUrl\n                }\n            }\n        "]))),function(e,t){t.middle.setValue({x:wt.x+e.dx,y:wt.y+e.dy}),t.left.setValue({x:It.x+e.dx,y:It.y+e.dy}),t.right.setValue({x:Ct.x+e.dx,y:Ct.y+e.dy}),t.leftmost.setValue({x:vt.x+e.dx,y:vt.y+e.dy}),t.rightmost.setValue({x:Ot.x+e.dx,y:Ot.y+e.dy})});function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=function(e){var t=e,n=[{origoName:"middle",targetValue:wt},{origoName:"left",targetValue:It},{origoName:"right",targetValue:Ct},{origoName:"leftmost",targetValue:vt},{origoName:"rightmost",targetValue:Ot}].map((function(e){var n=e.origoName,r=e.targetValue;return N.a.spring(t[n],{toValue:Ft({},r),useNativeDriver:!0})}));N.a.parallel(n).start()};function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(e,t,n){var r=e,a=[{origoName:"middle",targetValue:"left"===t?It:Ct},{origoName:"left",targetValue:"left"===t?vt:wt},{origoName:"right",targetValue:"left"===t?wt:Ot},{origoName:"leftmost",targetValue:"left"===t?{x:3*-ft,y:0}:It},{origoName:"rightmost",targetValue:"left"===t?Ct:{x:3*ft,y:0}}].map((function(e){var t=e.origoName,n=e.targetValue;return N.a.timing(r[t],{toValue:Lt({},n),useNativeDriver:!0,duration:250})}));N.a.parallel(a).start((function(){n(t)}))},zt=b.a.create({cardBoard:{width:bt,height:Et,backgroundColor:L.primary.dark,borderRadius:10,position:"absolute",alignItems:"center",paddingTop:10},image:{width:.6*bt,height:.6*bt,marginBottom:5},itemTitle:{color:L.primary.contrast,fontWeight:"bold",fontSize:18,marginBottom:5},descriptionText:{color:L.primary.contrast,textAlign:"center",fontSize:15,marginBottom:5},priceGroupText:{color:L.primary.contrast,textAlign:"center",fontSize:18,fontWeight:"bold",marginBottom:5},subtitle:{color:L.primary.contrast,textAlign:"center",fontWeight:"bold",marginTop:5},matchDataButtonsContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center"},matchButton:{margin:3},imageAndMatchDataIconsContainer:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},matchDataNumber:{color:L.primary.contrast,fontSize:18,fontWeight:"bold"},matchDataView:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:10,marginRight:10},matchIconButtonContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},iconBackgroundCircle:{backgroundColor:L.primary.light,width:70,height:70,borderRadius:70,flexDirection:"column",justifyContent:"center",alignItems:"center"},noItemsTextContainer:{marginTop:20}}),Ht=function(e){var t=e.cardData,n=e.matchData,r=Object(_e.useNavigation)();return o.a.createElement(h.a,{style:zt.cardBoard},o.a.createElement(y.a,{style:zt.itemTitle},t.title.toLocaleUpperCase()),o.a.createElement(ge.a,{source:{uri:t.imageSecureUrl},style:zt.image}),n.couldMatch&&o.a.createElement(h.a,{style:zt.matchDataButtonsContainer},o.a.createElement(h.a,{style:zt.matchDataView},o.a.createElement(ct.default,{name:"cached",size:25,color:L.primary.contrast}),o.a.createElement(y.a,{style:zt.matchDataNumber},n.myItemsMatchedWithThis.length)),o.a.createElement(h.a,{style:zt.matchDataView},o.a.createElement(ct.default,{name:"call-received",size:25,color:L.primary.contrast}),o.a.createElement(y.a,{style:zt.matchDataNumber},n.myItemsMatchedFromThis.length)),o.a.createElement(h.a,{style:zt.matchDataView},o.a.createElement(ct.default,{name:"call-made",size:25,color:L.primary.contrast}),o.a.createElement(y.a,{style:zt.matchDataNumber},n.myItemsMatchedToThis.length))),o.a.createElement(y.a,{style:zt.subtitle},"DESCRIPTION:"),o.a.createElement(y.a,{style:zt.descriptionText},t.description),o.a.createElement(y.a,{style:zt.subtitle},"PRICE GROUP:"),o.a.createElement(y.a,{style:zt.priceGroupText},t.priceGroup+" \u20ac"),t.brand&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{style:zt.subtitle},"BRAND:"),o.a.createElement(y.a,{style:zt.descriptionText},t.brand)),n.couldMatch&&o.a.createElement(h.a,{style:zt.matchIconButtonContainer},o.a.createElement(h.a,{style:zt.iconBackgroundCircle},o.a.createElement(z.a,{icon:"cards-heart",color:L.primary.contrast,size:40,onPress:function(){Xe(void 0),$e({mode:"BROWSE",item:{id:t.id,title:t.title,imageSecureUrl:t.imageSecureUrl},matches:n.myItemsMatchedWithThis,matchedFrom:n.myItemsMatchedFromThis,matchedTo:n.myItemsMatchedToThis}),r.navigate("Match")}}))),!n.couldMatch&&o.a.createElement(h.a,{style:zt.noItemsTextContainer},o.a.createElement(y.a,{style:zt.subtitle},"You have no items in this price group.")))},qt=function(e,t){var n=!1,r=[],a=[];e.forEach((function(e){e.priceGroup===t.priceGroup&&(n=!0,e.matchedTo.forEach((function(n){var a;t.id===n.id&&r.push({id:e.id,title:e.title,imageSecureUrl:null!=(a=e.imageSecureUrl)?a:""})})),e.matchedFrom.forEach((function(n){var r;t.id===n.id&&a.push({id:e.id,title:e.title,imageSecureUrl:null!=(r=e.imageSecureUrl)?r:""})})))}));var o=[];return r.forEach((function(e){a.every((function(t){return t.id!==e.id}))||o.push(e)})),o.forEach((function(e){r=r.filter((function(t){return t.id!==e.id})),a=a.filter((function(t){return t.id!==e.id}))})),{couldMatch:n,myItemsMatchedToThis:r,myItemsMatchedFromThis:a,myItemsMatchedWithThis:o}},_t=function(e){var t=e.cardData,n=e.cardOrigos,r=e.updateCards,i=e.onlySwipeOutToLeftAllowed,c=e.onlySwipeOutToRightAllowed,l=e.isAnOnlyCard,s=e.myItems,u=qt(s,t);if(l)return o.a.createElement(N.a.View,{style:{transform:[{translateX:n.middle.x}]}},o.a.createElement(Ht,{cardData:t,matchData:u}));var m=function(e,t,n,r){var o=Object(a.useRef)(lt.a.create({onStartShouldSetPanResponder:function(e,t){return!0},onPanResponderMove:function(t,n){Mt(n,e)},onPanResponderRelease:function(n,r){-r.dx>yt?Wt(e,"left",t):r.dx>yt?Wt(e,"right",t):Nt(e)}})).current,i=Object(a.useRef)(lt.a.create({onStartShouldSetPanResponder:function(e,t){return!0},onPanResponderMove:function(t,n){n.dx<0&&Mt(n,e)},onPanResponderRelease:function(n,r){-r.dx>yt?Wt(e,"left",t):Nt(e)}})).current,c=Object(a.useRef)(lt.a.create({onStartShouldSetPanResponder:function(e,t){return!0},onPanResponderMove:function(t,n){n.dx>0&&Mt(n,e)},onPanResponderRelease:function(n,r){r.dx>yt?Wt(e,"right",t):Nt(e)}})).current;return n?i:r?c:o}(n,r,i,c);return o.a.createElement(N.a.View,it()({style:{transform:[{translateX:n.middle.x}]}},m.panHandlers),o.a.createElement(Ht,{cardData:t,matchData:u}))},Yt=b.a.create({carouselRow:{flexDirection:"row",marginTop:10}}),$t=function(e){var t=e.cardData,n=e.sideCardOrigo,r=e.myItems;if(!n)return null;var a=qt(r,t);return o.a.createElement(N.a.View,{style:{transform:[{translateX:n.x}]}},o.a.createElement(Ht,{cardData:t,matchData:a}))};function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qt,Jt,Zt,en=function(e){var t=e.itemCards,n=e.myItems,r={leftmost:Object(a.useRef)(new N.a.ValueXY(Kt({},vt))).current,left:Object(a.useRef)(new N.a.ValueXY(Kt({},It))).current,middle:Object(a.useRef)(new N.a.ValueXY(Kt({},wt))).current,right:Object(a.useRef)(new N.a.ValueXY(Kt({},Ct))).current,rightmost:Object(a.useRef)(new N.a.ValueXY(Kt({},Ot))).current},i=Object(a.useState)(0),c=f()(i,2),l=c[0],s=c[1];return 0===t.length?o.a.createElement(h.a,null,o.a.createElement(y.a,null,"There are no items")):o.a.createElement(h.a,{style:Yt.carouselRow},l>=2&&o.a.createElement($t,{cardData:t[l-2],sideCardOrigo:r.leftmost,myItems:n}),l>=1&&o.a.createElement($t,{cardData:t[l-1],sideCardOrigo:r.left,myItems:n}),l>=0&&o.a.createElement(_t,{cardData:t[l],cardOrigos:r,updateCards:function(e){var t="left"===e?1:-1;s((function(e){return e+t})),r.leftmost.setValue(Kt({},vt)),r.left.setValue(Kt({},It)),r.middle.setValue(Kt({},wt)),r.right.setValue(Kt({},Ct)),r.rightmost.setValue(Kt({},Ot))},onlySwipeOutToLeftAllowed:0===l,onlySwipeOutToRightAllowed:l===t.length-1,isAnOnlyCard:1===t.length,myItems:n}),l>=0&&t.length>l+1&&o.a.createElement($t,{cardData:t[l+1],sideCardOrigo:r.right,myItems:n}),l>=0&&t.length>l+2&&o.a.createElement($t,{cardData:t[l+2],sideCardOrigo:r.rightmost,myItems:n}))},tn=function(){var e=Object(a.useState)(void 0),t=f()(e,2),n=t[0],r=t[1],i=Object(a.useState)(void 0),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useState)(void 0),m=f()(u,2),d=m[0],g=m[1],p=Object(a.useState)(!0),b=f()(p,2),E=b[0],w=b[1],v=Object(Re.useLazyQuery)(Vt),C=f()(v,2),O=C[0],T=C[1],x=T.loading,S=T.error,P=T.data,j=T.fetchMore,D=Object(Re.useQuery)(At),R=D.loading,k=D.error,B=D.data,V=Object(Re.useApolloClient)();S&&(console.log(S),s({title:"ERROR",content:"Something went wrong. Could not get items for browsing.",themeType:"error",clearNotification:function(){return s(void 0)}})),k&&(console.log(S),g({title:"ERROR",content:"Something went wrong. Could not get your own items.",themeType:"error",clearNotification:function(){return s(void 0)}}));var A=P,M=A&&A.browseItemsByPage&&A.browseItemsByPage.edges?A.browseItemsByPage.edges.filter((function(e){return void 0!==e})).map((function(e){return e.node})):void 0;return o.a.createElement(h.a,null,o.a.createElement(h.a,{style:Tt.browseContainer},void 0!==l&&o.a.createElement(H,l),void 0!==d&&o.a.createElement(H,d),o.a.createElement(y.a,{style:Tt.pageTitle},"BROWSE ITEMS"),void 0===n||E?o.a.createElement(Bt,{searchTerms:n,searchCriteriaChanged:function(e){return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:V.cache.modify({fields:{browseItemsByPage:function(){return{}}}}),w(!1),r(e),O({variables:{browseItemsByPageInput:{first:2,browseItemsInput:e}}});case 4:case"end":return t.stop()}}),null,null,null,Promise)},setShowSetSearchCriteria:w}):o.a.createElement(h.a,{style:Tt.submitButtonContainer},o.a.createElement(Te.a,{icon:"square-edit-outline",mode:"contained",onPress:function(){return w(!0)},disabled:!1,color:L.primary.main},"EDIT SEARCH CRITERIA"))),x&&o.a.createElement(me,null),!E&&M?0===M.length?o.a.createElement(h.a,{style:Tt.searchCriteriaContainer},null!=n&&n.priceGroups||null!=n&&n.phrasesInTitle||null!=n&&n.phrasesInDescription||null!=n&&n.brands?o.a.createElement(h.a,{style:Tt.noItemsContainer},o.a.createElement(y.a,{style:Tt.noItemsText},"No items were returned"),o.a.createElement(y.a,{style:Tt.noItemsText},"with the selected search criteria.")):o.a.createElement(h.a,{style:Tt.noItemsContainer},o.a.createElement(y.a,{style:Tt.noItemsText},"Currently there are no items in the database."))):o.a.createElement(en,{itemCards:M,myItems:void 0===B?[]:B.myItems}):o.a.createElement(o.a.Fragment,null,R?o.a.createElement(me,null):null),!E&&P&&P.browseItemsByPage.pageInfo.hasNextPage&&o.a.createElement(h.a,{style:Tt.fetchMoreContainer},o.a.createElement(Te.a,{icon:"page-next-outline",mode:"contained",onPress:function(){j&&P&&j({variables:{browseItemsByPageInput:{first:2,after:P.browseItemsByPage.pageInfo.endCursor,browseItemsInput:n}}})},disabled:!1,color:L.primary.main},"MORE")))},nn=b.a.create({pageTitle:{marginTop:60,fontSize:25,fontWeight:"bold",textAlign:"center"},subtitle:{marginTop:20,marginBottom:10,fontSize:20,fontWeight:"bold",textAlign:"center"},removeAccountButtonView:{marginTop:5,justifyContent:"center",marginBottom:30},pageContentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},waitSpinnerContainer:{height:100,width:300},infoText:{textAlign:"center"}}),rn=Object(Re.gql)(Qt||(Qt=rt()(["\n    mutation removePerson {\n        removePerson {\n            code\n            success\n            message\n            username\n            facebookName\n        }\n    }\n"]))),an=function(e){var t=e;if("boolean"!==typeof t.data.removePerson.success)throw new Error("Response success must be of type boolean.");return!!t.data.removePerson.success||t.data.removePerson.message},on=n(226),cn=function(e){var t=e.showConfirmRemoveAccount,n=e.setShowConfirmRemoveAccount,i=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],o=t[1],i=Object(a.useContext)(m).dispatch,c=Object(Re.useMutation)(rn),l=f()(c,1)[0],s=Object(a.useState)(void 0),u=f()(s,2),d=u[0],g=u[1];return{isSubmitting:n,submitRemoveAccount:function(){var e,t;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return o(!0),n.prev=1,n.next=4,I.a.awrap(l());case 4:if(e=n.sent,t=an(e),!("string"!==typeof t)){n.next=11;break}g({title:T,content:x,themeType:"success",clearNotification:function(){i({type:r.SET_LOGGED_IN_USER,data:void 0})}}),n.next=13;break;case 11:throw console.log(t),new Error;case 13:o(!1),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(1),console.log(n.t0),g({title:C,content:O,themeType:"error",clearNotification:function(){return g(void 0)}}),o(!1);case 21:case"end":return n.stop()}}),null,null,[[1,16]],Promise)},notification:d}}(),c=i.isSubmitting,l=i.submitRemoveAccount,s=i.notification,u=Object(a.useState)(!1),d=f()(u,2),g=d[0],p=d[1];return o.a.createElement(h.a,{style:nn.pageContentContainer},o.a.createElement(y.a,{style:nn.subtitle},"REMOVE ACCOUNT"),void 0!==s&&o.a.createElement(H,s),t?o.a.createElement(h.a,null,o.a.createElement(y.a,{style:nn.infoText},"You are about to remove your account."),o.a.createElement(y.a,{style:nn.infoText},"Are you sure you want to continue?"),o.a.createElement(y.a,{style:nn.infoText},"All your data will be deleted and"),o.a.createElement(y.a,{style:nn.infoText},"your account cannot be later restored."),o.a.createElement(on.a,{center:!0,title:"I understand and want to proceed.",checked:g,onPress:function(){return p(!g)},checkedColor:L.primary.main,textStyle:{fontWeight:"normal"},containerStyle:{backgroundColor:"transparent",borderWidth:0},testID:"remove-account-checkbox"}),o.a.createElement(h.a,{style:nn.removeAccountButtonView},o.a.createElement(Te.a,{icon:"account-remove",mode:"contained",onPress:l,color:L.error,disabled:c||!g,testID:"remove-account-permanently"},"REMOVE MY ACCOUNT")),o.a.createElement(y.a,{style:nn.infoText},"Having second thoughts?"),o.a.createElement(h.a,{style:nn.removeAccountButtonView},o.a.createElement(Te.a,{icon:"keyboard-return",mode:"contained",onPress:function(){p(!1),n(!1)},color:L.primary.main,disabled:c,testID:"cancel-remove-account"},"CANCEL REMOVE MY ACCOUNT"))):o.a.createElement(h.a,null,o.a.createElement(y.a,{style:nn.infoText},"Wish to permanently remove your account?"),o.a.createElement(h.a,{style:nn.removeAccountButtonView},o.a.createElement(Te.a,{icon:"account-remove",mode:"contained",onPress:function(){return n(!0)},color:L.primary.main,testID:"start-removing-account"},"REMOVE MY ACCOUNT"))),o.a.createElement(h.a,{style:nn.waitSpinnerContainer},c&&o.a.createElement(me,null)))},ln=b.a.create({logoutButtonView:{marginTop:5,justifyContent:"center",marginBottom:30},contentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:20},infoText:{textAlign:"center"}}),sn=function(){var e=Object(a.useContext)(m).dispatch;return o.a.createElement(h.a,{style:ln.contentContainer},o.a.createElement(y.a,{style:ln.infoText},"Wish to logout from SWAPLINGS?"),o.a.createElement(h.a,{style:ln.logoutButtonView},o.a.createElement(Te.a,{icon:"logout",mode:"contained",onPress:function(){e({type:r.SET_LOGGED_IN_USER,data:void 0})},color:L.primary.main,testID:"logout-button"},"LOGOUT")))},un=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],r=t[1];return o.a.createElement(h.a,{style:nn.pageContentContainer},o.a.createElement(y.a,{style:nn.pageTitle},"SETTINGS"),o.a.createElement(sn,null),o.a.createElement(cn,{showConfirmRemoveAccount:n,setShowConfirmRemoveAccount:r}))},mn=b.a.create({imageView:{width:150,height:150,borderRadius:6},iconView:{backgroundColor:L.primary.dark,flexDirection:"column",justifyContent:"center",alignItems:"center"},pageTitle:{marginTop:60,fontSize:25,fontWeight:"bold",textAlign:"center"},infoText:{textAlign:"center"},subtitle:{fontWeight:"bold",fontSize:18,marginBottom:-5,marginTop:10},formContainer:{marginLeft:20},priceGroupInfo:{marginTop:8,marginBottom:5},priceGroupInfoWithError:{marginTop:8,marginBottom:5,color:L.error},priceGroupAndImageContainer:{flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start"},priceGroupToggleButtonsContainer:{flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},toggleButton:{marginBottom:5,borderColor:L.primary.light,borderWidth:1},toggleButtonOrImageContainer:{marginRight:30},submitButtonContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:20},itemImageButton:{backgroundColor:L.primary.dark}}),dn=function(e){var t=e.disabled,n=Object(_e.useNavigation)(),r=Object(Re.useReactiveVar)(Ye),a=function(){t||n.navigate("Imaging")};return o.a.createElement(o.a.Fragment,null,r&&r.clientUrl?o.a.createElement(q.a,{onPress:a},o.a.createElement(ge.a,{style:mn.imageView,source:{uri:r.clientUrl}})):o.a.createElement(h.a,{style:[mn.imageView,mn.iconView]},o.a.createElement(z.a,{icon:"image-edit",color:"#FFFFFF",size:100,style:mn.itemImageButton,onPress:a})))},gn=function(e){var t=e.priceGroup,n=e.setPriceGroup,r=e.disabled,a=L.primary.main;return o.a.createElement(h.a,{style:mn.priceGroupToggleButtonsContainer},xt.map((function(e){return o.a.createElement(Te.a,{key:e.text+"toggle-button",mode:"contained",onPress:function(){return n(e.groupEnum)},disabled:r,color:e.groupEnum===t?a:"#efebe9",style:mn.toggleButton},e.text)})))},pn=Object(Re.gql)(Jt||(Jt=rt()(["\n    mutation addItem($addItemInput: AddItemInput!) {\n        addItem(addItemInput: $addItemInput) {\n            code\n            success\n            message\n            item {\n                id\n                title\n                priceGroup\n                description\n                brand\n                imagePublicId\n                imageSecureUrl\n            }\n        }\n    }\n"]))),fn=function(e,t,n){t("success"===e?{title:j,content:D,themeType:"success",clearNotification:function(){n(),t(void 0)}}:{title:S,content:P,themeType:"error",clearNotification:function(){n(),t(void 0)}})},hn=function(e){var t=Object(a.useState)(!1),n=f()(t,2),r=n[0],o=n[1],i=Object(Re.useMutation)(pn,{update:function(e,t){!function(e,t){console.log(e),e.modify({fields:{myItems:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t)return n;var r=e.writeFragment({data:t.addItem.item,fragment:Object(Re.gql)(Zt||(Zt=rt()(["\n                        fragment NewItem on Item {\n                            id\n                            title\n                            priceGroup\n                            description\n                            brand\n                            imagePublicId\n                            imageSecureUrl\n                        }\n                    "])))});return[].concat(c()(n),[r])}}})}(e,t.data)}}),l=f()(i,1)[0],s=Object(a.useState)(void 0),u=f()(s,2),m=u[0],d=u[1];return{submitting:r,submitAddItem:function(t){var n,r;return I.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.prev=1,a.next=4,I.a.awrap(l({variables:{addItemInput:t}}));case 4:if(n=a.sent,!(r=n.data)||!r.addItem.success){a.next=10;break}fn("success",d,e),a.next=11;break;case 10:throw new Error;case 11:o(!1),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(1),fn("error",d,e),o(!1);case 18:case"end":return a.stop()}}),null,null,[[1,14]],Promise)},notification:m}};function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En,wn,In,vn,Cn,On,Tn=function(){var e=Object(a.useState)(""),t=f()(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=f()(i,2),l=c[0],s=c[1],u=Object(a.useState)(""),m=f()(u,2),d=m[0],g=m[1],p=Object(a.useState)(""),b=f()(p,2),E=b[0],w=b[1],v=Object(Re.useReactiveVar)(Ye),C=Object(a.useState)(!1),O=f()(C,2),T=O[0],x=O[1],S=hn((function(){r(""),s(""),g(""),w(""),Ye(void 0),x(!1)})),P=S.notification,j=S.submitAddItem,D=S.submitting;return o.a.createElement(h.a,null,void 0!==P&&o.a.createElement(H,P),o.a.createElement(y.a,{style:mn.pageTitle},"ADD A NEW ITEM"),o.a.createElement(y.a,{style:mn.infoText},"Fill in item details and then submit."),o.a.createElement(h.a,{style:mn.formContainer},o.a.createElement(y.a,{style:mn.subtitle},"TITLE"),o.a.createElement(ie,{target:"itemTitle",value:n,handleValueChange:function(e){return r(e)},isEditable:!D,isVisible:!0,error:T&&!Z(n)?"RED_TITLE":void 0}),o.a.createElement(y.a,{style:mn.subtitle},"DESCRIPTION"),o.a.createElement(ie,{target:"itemDescription",value:l,handleValueChange:function(e){return s(e)},isEditable:!D,isVisible:!0,error:T&&!ee(l)?"RED_TITLE":void 0}),o.a.createElement(y.a,{style:mn.subtitle},"BRAND"),o.a.createElement(ie,{target:"itemBrand",value:d,handleValueChange:function(e){return g(e)},isEditable:!D,isVisible:!0,error:T&&""!==d&&!te(d)?"RED_TITLE":void 0}),o.a.createElement(h.a,{style:mn.priceGroupAndImageContainer},o.a.createElement(h.a,{style:mn.toggleButtonOrImageContainer},o.a.createElement(y.a,{style:mn.subtitle},"PRICE GROUP"),T&&""===E?o.a.createElement(y.a,{style:mn.priceGroupInfoWithError},"Estimate is required"):o.a.createElement(y.a,{style:mn.priceGroupInfo},"Estimate the value in \u20ac"),o.a.createElement(gn,{priceGroup:E,setPriceGroup:w,disabled:D})),o.a.createElement(h.a,{style:mn.toggleButtonOrImageContainer},o.a.createElement(y.a,{style:mn.subtitle},"PHOTO"),T&&!v?o.a.createElement(y.a,{style:mn.priceGroupInfoWithError},"Tap (photo is required)"):o.a.createElement(y.a,{style:mn.priceGroupInfo},"Tap to take a photo"),o.a.createElement(dn,{disabled:D})))),o.a.createElement(h.a,{style:mn.submitButtonContainer},o.a.createElement(Te.a,{icon:"send",mode:"contained",onPress:function(){var e;return I.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===v||ne(n,l,d,E,v)){t.next=4;break}x(!0),t.next=9;break;case 4:if(!v){t.next=9;break}return e={title:n,description:l,priceGroup:E,imagePublicId:v.publicId,imageSecureUrl:v.secureUrl},d&&(e=bn(bn({},e),{},{brand:d})),t.next=9,I.a.awrap(j(e));case 9:case"end":return t.stop()}}),null,null,null,Promise)},disabled:D,color:v&&""!==n&&""!==l&&""!==E?L.primary.main:L.primary.light},"SUBMIT")))},xn=b.a.create({pageTitle:{marginTop:60,marginBottom:10,fontSize:25,fontWeight:"bold",textAlign:"center"},image:{width:150,height:150,marginBottom:5,borderRadius:8},matchImage:{width:120,height:120,margin:10,borderRadius:8},imageRowContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center"},myItemImage:{width:80,height:80,marginLeft:3,marginRight:3,borderRadius:3,backgroundColor:"orange"},itemTitle:{fontSize:20,fontWeight:"bold",textAlign:"center"},matchButtonView:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:20,marginBottom:20},pageContentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},itemImageButton:{backgroundColor:L.primary.dark},iconContainer:{backgroundColor:L.primary.dark,borderRadius:3},matchImageRowContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:L.primary.dark,borderRadius:6,marginBottom:10},removeWarningContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},removeAccountButtonView:{justifyContent:"center",marginBottom:20},removeWarningText:{marginTop:5,color:L.primary.main,marginBottom:-5},matchImageCentralIconsContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:8,marginRight:8},iconBackgroundCircle:{backgroundColor:L.primary.light,width:50,height:50,borderRadius:50,flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:10},newPostContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},postIconBackgroundCircle:{backgroundColor:L.primary.light,width:45,height:45,borderRadius:45,flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:10,marginTop:5},manageMatchPageContainer:{flexDirection:"column",justifyContent:"flex-end",alignItems:"center",width:K.a.get("window").width},chatContainer:{height:.45*K.a.get("window").height,width:K.a.get("window").width,flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},chatPostContainer:{width:.9*K.a.get("window").width,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginBottom:10,borderRadius:6},dateTimeText:{fontStyle:"italic",fontSize:12,color:L.primary.light},contentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:.9*K.a.get("window").width-80,marginLeft:5,marginRight:5},avatarContainer:{width:40,height:40},scrollView:{flex:1,flexGrow:1}}),Sn=Object(Re.gql)(En||(En=rt()(["\n            query MyItemsInCache {\n                myItems {\n                    id\n                    title\n                    priceGroup\n                    imageSecureUrl\n                }\n            }\n        "]))),Pn=Object(Re.gql)(wn||(wn=rt()(["\n    query itemsChat($itemsChatInput: ItemsChatInput!){\n        itemsChat(itemsChatInput: $itemsChatInput) {\n            id \n            itemIdA\n            itemIdB\n            posts {\n                post\n                postingItemId\n                createdAt                \n            }\n          \n        }\n    }\n"]))),jn=Object(Re.gql)(In||(In=rt()(["\n    mutation removeMatch($changeMatchInput: ChangeMatchInput) {\n        removeMatch(changeMatchInput: $changeMatchInput) {\n            success\n            message\n            myItem {\n                id\n                title \n                priceGroup\n                description\n                brand\n                imagePublicId\n                imageSecureUrl\n                matchedTo {\n                    id\n                    title\n                    priceGroup\n                    description\n                    brand\n                    imagePublicId\n                    imageSecureUrl\n                }\n                matchedFrom {\n                    id\n                    title\n                    priceGroup\n                    description\n                    brand\n                    imagePublicId\n                    imageSecureUrl\n                }\n            }\n        }\n    }\n"]))),Dn=Object(Re.gql)(vn||(vn=rt()(["\n    mutation addMatch($changeMatchInput: ChangeMatchInput) {\n        addMatch(changeMatchInput: $changeMatchInput) {\n            success\n            message\n            myItem {\n                id\n                title \n                priceGroup\n                description\n                brand\n                imagePublicId\n                imageSecureUrl\n                matchedTo {\n                    id\n                    title\n                    priceGroup\n                    description\n                    brand\n                    imagePublicId\n                    imageSecureUrl\n                }\n                matchedFrom {\n                    id\n                    title\n                    priceGroup\n                    description\n                    brand\n                    imagePublicId\n                    imageSecureUrl\n                }\n            }\n        }\n    }\n"]))),Rn=Object(Re.gql)(Cn||(Cn=rt()(["\n    mutation addPost($addPostInput: AddPostInput!) {\n        addPost(addPostInput: $addPostInput) {\n            success\n            message\n            chat {\n                id\n                itemIdA\n                personIdA\n                itemIdB\n                personIdB\n                posts {\n                    post\n                    postingItemId\n                    createdAt\n                }\n            }\n        }\n    }\n"]))),kn=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],r=t[1],o=Object(a.useState)(void 0),i=f()(o,2),c=i[0],l=i[1],s=Object(Re.useMutation)(Dn),u=f()(s,1)[0],m=Object(Re.useMutation)(jn),d=f()(m,1)[0];return{submitting:n,submitAddMatch:function(e){var t,n,a;return I.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r(!0),t={myItemId:e.myItem.id,itemToId:e.otherItem.id},o.prev=2,o.next=5,I.a.awrap(u({variables:{changeMatchInput:t}}));case 5:if(n=o.sent,a=n.data,r(!1),null==a||!a.addMatch.success){o.next=10;break}return o.abrupt("return",!0);case 10:return o.abrupt("return",!1);case 13:return o.prev=13,o.t0=o.catch(2),console.log("error\n",o.t0),l({title:"ERROR",content:"Error in adding match",themeType:"error",clearNotification:function(){return l(void 0)}}),r(!1),o.abrupt("return",!1);case 19:case"end":return o.stop()}}),null,null,[[2,13]],Promise)},notification:c,submitRemoveMatch:function(e){var t,n,a;return I.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r(!0),t={myItemId:e.myItem.id,itemToId:e.otherItem.id},o.prev=2,o.next=5,I.a.awrap(d({variables:{changeMatchInput:t}}));case 5:if(n=o.sent,null==(a=n.data)||!a.removeMatch.success){o.next=9;break}return o.abrupt("return",!0);case 9:return o.abrupt("return",!1);case 12:return o.prev=12,o.t0=o.catch(2),console.log("error\n",o.t0),l({title:"ERROR",content:"Error in removing match",themeType:"error",clearNotification:function(){return l(void 0)}}),r(!1),o.abrupt("return",!1);case 18:case"end":return o.stop()}}),null,null,[[2,12]],Promise)}}},Bn=function(e){var t=e.isSubmitting,n=e.removeMatch,r=Object(a.useState)(!1),i=f()(r,2),c=i[0],l=i[1];return o.a.createElement(h.a,{style:xn.removeWarningContainer},o.a.createElement(y.a,{style:xn.removeWarningText},"If you withdraw your swap proposal,"),o.a.createElement(y.a,{style:xn.removeWarningText},"the chat posts will also be permanently removed."),o.a.createElement(on.a,{center:!0,title:"I understand and want to continue.",checked:c,onPress:function(){return l(!c)},checkedColor:L.primary.main,textStyle:{fontWeight:"normal",color:L.primary.main},containerStyle:{backgroundColor:"transparent",borderWidth:0}}),o.a.createElement(h.a,{style:xn.removeAccountButtonView},o.a.createElement(Te.a,{icon:"account-remove",mode:"contained",compact:!0,onPress:n,color:c?L.error:L.primary.light,disabled:t||!c},"REMOVE MATCH")))},Vn=function(e){var t,n,r=e.selectedMatch,a=e.setShowRemoveWarning;return o.a.createElement(h.a,{style:xn.matchImageRowContainer},o.a.createElement(ge.a,{source:{uri:null!=(t=r.otherItem.imageSecureUrl)?t:""},style:xn.matchImage}),o.a.createElement(h.a,{style:xn.matchImageCentralIconsContainer},o.a.createElement(ct.default,{name:"cards-heart",size:50,color:L.primary.light}),o.a.createElement(h.a,{style:xn.iconBackgroundCircle},o.a.createElement(z.a,{icon:"delete-forever",color:L.primary.dark,size:40,onPress:function(){return a(!0)}}))),o.a.createElement(ge.a,{source:{uri:null!=(n=r.myItem.imageSecureUrl)?n:""},style:xn.matchImage}))},An=n(47),Mn=function(e){var t=e.post,n=e.isMyItem,r=e.imageUrl;return o.a.createElement(h.a,{style:xn.chatPostContainer},o.a.createElement(h.a,{style:xn.avatarContainer},!n&&o.a.createElement(An.a.Image,{size:40,source:{uri:r}})),o.a.createElement(h.a,{style:xn.contentContainer},o.a.createElement(y.a,{style:xn.dateTimeText},function(e){var t=new Date(parseInt(e)),n=[t.getMonth(),t.getDate(),t.getFullYear(),t.getHours(),t.getMinutes()],r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],l=new Date,s=[l.getMonth(),l.getDate(),l.getFullYear()],u=i+"."+(c<10?"0"+c:c);return r===s[0]&&a===s[1]&&o===s[2]?"Today "+u:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]+" "+a+"."+r+"."+o+" "+i+"."+c+" "+u}(t.createdAt)),o.a.createElement(y.a,null,t.post)),o.a.createElement(h.a,{style:xn.avatarContainer},n&&o.a.createElement(An.a.Image,{size:40,source:{uri:r}})))},Un=function(e){var t=e.posts,n=e.selectedMatch;return o.a.createElement(h.a,{style:xn.scrollView},o.a.createElement(et.a,null,o.a.createElement(h.a,{style:xn.chatContainer},t.map((function(e,t){var r,a,i=n.myItem.id===e.postingItemId;return o.a.createElement(Mn,{key:"post-"+t.toString(),post:e,isMyItem:i,imageUrl:i?null!=(r=n.myItem.imageSecureUrl)?r:"":null!=(a=n.otherItem.imageSecureUrl)?a:""})})))))},Fn=function(e){var t=e.selectedMatch,n=e.refetchPosts,r=Object(a.useState)(""),i=f()(r,2),c=i[0],l=i[1],s=Object(a.useState)(!1),u=f()(s,2),m=u[0],d=u[1],g=function(){var e=Object(a.useState)(!1),t=f()(e,2),n=t[0],r=t[1],o=Object(a.useState)(void 0),i=f()(o,2),c=i[0],l=i[1],s=Object(Re.useMutation)(Rn),u=f()(s,1)[0];return{submittingPost:n,postNotification:c,submitPost:function(e,t,n){var a,o,i;return I.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r(!0),a={itemIdA:e,itemIdB:t,post:n},c.prev=2,c.next=5,I.a.awrap(u({variables:{addPostInput:a}}));case 5:if(o=c.sent,!((i=o.data)&&i.addPost&&i.addPost.success)){c.next=10;break}return r(!1),c.abrupt("return",!0);case 10:return c.abrupt("return",!1);case 13:return c.prev=13,c.t0=c.catch(2),console.log("error\n",c.t0),l({title:"ERROR",content:"Error in adding post",themeType:"error",clearNotification:function(){return l(void 0)}}),r(!1),c.abrupt("return",!1);case 19:case"end":return c.stop()}}),null,null,[[2,13]],Promise)}}}(),p=g.submittingPost,y=g.postNotification,b=g.submitPost;return o.a.createElement(h.a,{style:xn.newPostContainer},void 0!==y&&o.a.createElement(H,y),o.a.createElement(ie,{target:"matchPost",value:c,handleValueChange:function(e){return l(e)},isEditable:!0,isVisible:!0,error:m&&c.length<1?"RED_TITLE":void 0}),o.a.createElement(h.a,{style:xn.postIconBackgroundCircle},o.a.createElement(z.a,{icon:"send",color:"#FFFFFF",size:30,onPress:function(){return I.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,I.a.awrap(b(t.myItem.id,t.otherItem.id,c));case 3:e.sent&&(n(),l(""),d(!1));case 5:case"end":return e.stop()}}),null,null,null,Promise)},disabled:p})))},Nn=function(){var e,t,n=Object(Re.useReactiveVar)(Xe),r=Object(a.useState)(!1),i=f()(r,2),c=i[0],l=i[1],s=kn(),u=s.submitting,m=s.notification,d=s.submitRemoveMatch,g=Object(_e.useNavigation)(),p=Object(Re.useQuery)(Pn,{variables:{itemsChatInput:{itemIdA:null!=(e=null==n?void 0:n.myItem.id)?e:"",itemIdB:null!=(t=null==n?void 0:n.otherItem.id)?t:""}},pollInterval:3e3}),b=p.loading,E=p.error,w=p.data,v=p.refetch;if(!n)return null;var C=w&&w.itemsChat&&w.itemsChat.posts&&w.itemsChat.posts.length>0?w.itemsChat.posts:[];return o.a.createElement(h.a,{style:xn.manageMatchPageContainer},o.a.createElement(y.a,{style:xn.pageTitle},"MANAGE MATCH"),void 0!==m&&o.a.createElement(H,m),c?o.a.createElement(Bn,{removeMatch:function(){var e,t;return I.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I.a.awrap(d({mode:"MY",currentState:"BOTH",myItem:{id:n.myItem.id,title:n.myItem.title,imageSecureUrl:null!=(e=n.myItem.imageSecureUrl)?e:""},otherItem:{id:n.otherItem.id,title:n.otherItem.title,imageSecureUrl:null!=(t=n.otherItem.imageSecureUrl)?t:""}}));case 2:r.sent&&g.navigate("Home");case 4:case"end":return r.stop()}}),null,null,null,Promise)},isSubmitting:u}):o.a.createElement(Vn,{selectedMatch:n,setShowRemoveWarning:l}),o.a.createElement(h.a,null,b?o.a.createElement(me,null):E?o.a.createElement(y.a,null,"Something went wrong. Could not find chat."):null),C.length>0&&o.a.createElement(Un,{selectedMatch:n,posts:C}),o.a.createElement(Fn,{selectedMatch:n,refetchPosts:v}))},Gn=function(e){var t=e.action,n=Object(a.useState)(!1),r=f()(n,2),i=r[0],c=r[1],l=kn(),s=l.submitting,u=l.submitAddMatch,m=l.notification,d=l.submitRemoveMatch,g=Object(_e.useNavigation)(),p=function(){var e;return I.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("FROM"!==t.currentState&&"AVAILABLE"!==t.currentState){n.next=5;break}return n.next=3,I.a.awrap(u(t));case 3:e=n.sent,"FROM"===t.currentState&&e?b():y();case 5:if("TO"!==t.currentState&&"BOTH"!==t.currentState){n.next=10;break}return n.next=8,I.a.awrap(d(t));case 8:n.sent&&y();case 10:case"end":return n.stop()}}),null,null,null,Promise)},y=function(){$e(void 0),"MY"===t.mode?g.navigate("Home"):g.navigate("Browse")},b=function(){$e(void 0),Xe({myItem:t.myItem,otherItem:t.otherItem})},E={TO:"WITHDRAW SWAP PROPOSITION",FROM:"CONFIRM SWAP",BOTH:"WITHDRAW SWAP PROPOSITION",AVAILABLE:"PROPOSE SWAP"};return o.a.createElement(h.a,null,void 0!==m&&o.a.createElement(H,m),o.a.createElement(h.a,{style:xn.imageRowContainer},o.a.createElement(ge.a,{source:{uri:t.otherItem.imageSecureUrl},style:xn.image}),o.a.createElement(ge.a,{source:{uri:t.myItem.imageSecureUrl},style:xn.image})),"BOTH"===t.currentState?o.a.createElement(h.a,null,i?o.a.createElement(Bn,{removeMatch:p,isSubmitting:s}):o.a.createElement(h.a,{style:xn.matchButtonView},o.a.createElement(Te.a,{mode:"contained",onPress:function(){return c(!0)},disabled:!1,color:L.primary.main},E.BOTH))):o.a.createElement(h.a,{style:xn.matchButtonView},o.a.createElement(Te.a,{mode:"contained",onPress:p,disabled:!1,color:"TO"===t.currentState?L.error:L.primary.main},E[t.currentState])),"BOTH"===t.currentState&&o.a.createElement(h.a,{style:xn.matchButtonView},o.a.createElement(Te.a,{mode:"contained",onPress:b,disabled:!1,color:L.primary.main},"VIEW MATCH")),o.a.createElement(h.a,{style:xn.matchButtonView},o.a.createElement(Te.a,{icon:"keyboard-return",mode:"contained",onPress:y,disabled:!1,color:L.primary.main},"BACK")))},Ln=b.a.create({pageTitle:{marginTop:60,marginBottom:10,fontSize:25,fontWeight:"bold",textAlign:"center"},image:{width:150,height:150,marginBottom:5,borderRadius:8},matchImage:{width:120,height:120,margin:10,borderRadius:8},imageRowContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center"},myItemImage:{width:80,height:80,marginLeft:3,marginRight:3,borderRadius:3,backgroundColor:"orange"},itemTitle:{fontSize:20,fontWeight:"bold",textAlign:"center"},matchButtonView:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:20,marginBottom:20},pageContentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center"},itemImageButton:{backgroundColor:L.primary.dark},iconContainer:{backgroundColor:L.primary.dark,borderRadius:3},matchImageRowContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:L.primary.dark,borderRadius:6,marginBottom:10},matchImageCentralIconsContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:8,marginRight:8},iconBackgroundCircle:{backgroundColor:L.primary.light,width:50,height:50,borderRadius:50,flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:10},newPostContainer:{flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},postIconBackgroundCircle:{backgroundColor:L.primary.light,width:45,height:45,borderRadius:45,flexDirection:"column",justifyContent:"center",alignItems:"center",marginLeft:10,marginTop:5},manageMatchPageContainer:{flexDirection:"column",justifyContent:"flex-end",alignItems:"center",width:K.a.get("window").width},chatContainer:{height:.45*K.a.get("window").height,width:K.a.get("window").width,flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},chatPostContainer:{width:.9*K.a.get("window").width,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginBottom:10,borderRadius:6},dateTimeText:{fontStyle:"italic",fontSize:12,color:L.primary.light},contentContainer:{flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:.9*K.a.get("window").width-70},avatarContainer:{width:35,height:35},scrollView:{flex:1,flexGrow:1}}),Wn={BOTH:o.a.createElement(y.a,null,"already ",o.a.createElement("strong",null,"MATCHED")," with:"),TO:o.a.createElement(y.a,null,"you have ",o.a.createElement("strong",null,"PROPOSED")," to swap with:"),FROM:o.a.createElement(y.a,null,"you have been ",o.a.createElement("strong",null,"ASKED")," to swap with:"),AVAILABLE:o.a.createElement(y.a,null,"you could ",o.a.createElement("strong",null,"PROPOSE")," to swap with:")},zn=function(e){var t=e.mode,n=e.type,r=e.itemsForButtons,a=e.setAction,i=e.mainItem;if(0===r.length)return null;if("MY"===t&&"AVAILABLE"===n)throw new Error('Type "AVAILABLE" is not available for mode "MY".');return o.a.createElement(h.a,null,Wn[n],o.a.createElement(h.a,{style:Ln.imageRowContainer},r.map((function(e){if(e.imageSecureUrl){var r={mode:t,currentState:n,myItem:"MY"===t?i:e,otherItem:"MY"===t?e:i};return o.a.createElement(q.a,{onPress:function(){return a(r)},key:e.id+"-"+n},o.a.createElement(ge.a,{source:{uri:e.imageSecureUrl},style:Ln.myItemImage}))}return null}))))},Hn=function(e){var t=e.matchToHandle,n=e.setAction,r=e.myItemsInCache,a=t.mode,i=t.item,c=t.matches,l=t.matchedFrom,s=t.matchedTo,u=Object(_e.useNavigation)(),m=function(e,t,n,r){var a=[];return e.forEach((function(e){t.every((function(t){return t.id!==e.id}))&&n.every((function(t){return t.id!==e.id}))&&r.every((function(t){return t.id!==e.id}))&&a.push(e)})),a}(r,c,l,s);return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{style:xn.itemTitle},i.title.toLocaleUpperCase()),o.a.createElement(ge.a,{source:{uri:i.imageSecureUrl},style:xn.image}),o.a.createElement(zn,{mode:t.mode,type:"BOTH",itemsForButtons:c,mainItem:i,setAction:n}),o.a.createElement(zn,{mode:t.mode,type:"TO",mainItem:i,itemsForButtons:s,setAction:n}),o.a.createElement(zn,{mode:t.mode,type:"FROM",mainItem:i,itemsForButtons:l,setAction:n}),"BROWSE"===a&&o.a.createElement(zn,{mode:t.mode,type:"AVAILABLE",mainItem:i,itemsForButtons:m,setAction:n}),o.a.createElement(h.a,{style:xn.matchButtonView},o.a.createElement(Te.a,{icon:"keyboard-return",mode:"contained",onPress:function(){$e(void 0),"MY"===a?u.navigate("Home"):u.navigate("Browse")},disabled:!1,color:L.primary.main},"BACK")))},qn=function(e){var t=e.matchToHandle,n=e.myItemsInCache,r=Object(a.useState)(void 0),i=f()(r,2),c=i[0],l=i[1];return o.a.createElement(h.a,{style:xn.pageContentContainer},o.a.createElement(y.a,{style:xn.pageTitle},"HANDLE SWAP PROPOSALS"),c?o.a.createElement(Gn,{action:c}):o.a.createElement(Hn,{matchToHandle:t,myItemsInCache:n,setAction:l}))},_n=function(){var e=Object(Re.useReactiveVar)($e),t=Object(Re.useReactiveVar)(Xe),n=Object(_e.useNavigation)(),r=Object(Re.useApolloClient)().readQuery({query:Sn});return void 0!==t?o.a.createElement(Nn,null):void 0!==e?o.a.createElement(qn,{matchToHandle:e,myItemsInCache:r?r.myItems:[]}):o.a.createElement(h.a,{style:xn.pageContentContainer},o.a.createElement(y.a,{style:xn.pageTitle},"MATCH"),o.a.createElement(y.a,null,"An item needs to be selected to view its' matching status."),o.a.createElement(Y,{infoText:"Either select one of your own items:",underlinedText:"MY ITEMS",moveAction:function(){return n.navigate("Home")}}),o.a.createElement(Y,{infoText:"Or browse items by other people:",underlinedText:"BROWSE ITEMS",moveAction:function(){return n.navigate("Browse")}}))};!function(e){e.HOME="Home",e.BROWSE="Browse",e.ADD="Add",e.SETTINGS="Settings",e.IMAGING="Imaging",e.MATCH="Match"}(On||(On={}));var Yn=function(e){throw new Error("Unhandled value in switch, value:"+JSON.stringify(e))},$n=n(146),Xn=n(155);Object(g.enableScreens)();var Kn=function(){var e=Object(Ze.a)();return o.a.createElement(e.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var n=e.color,r=e.size;return function(e,t,n){switch(e.name){case On.HOME:return o.a.createElement($n.default,{name:"home",size:t,color:n});case On.BROWSE:return o.a.createElement(Xn.default,{name:"view-carousel",size:t,color:n});case On.ADD:return o.a.createElement(Xn.default,{name:"library-add",size:t,color:n});case On.SETTINGS:case On.IMAGING:return o.a.createElement($n.default,{name:"settings-sharp",size:t,color:n});case On.MATCH:return o.a.createElement($n.default,{name:"chatbox-ellipses",size:t,color:n});default:return Yn(e)}}(t,r,n)},tabBarTestID:"TabBar-"+t.name}},tabBarOptions:{activeTintColor:L.primary.dark,inactiveTintColor:L.primary.light,style:{height:50}}},o.a.createElement(e.Screen,{name:On.HOME,component:pt}),o.a.createElement(e.Screen,{name:On.ADD,component:Tn}),o.a.createElement(e.Screen,{name:On.BROWSE,component:tn}),o.a.createElement(e.Screen,{name:On.MATCH,component:_n}),o.a.createElement(e.Screen,{name:On.SETTINGS,component:un}))};function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(g.enableScreens)();var Zn=function(){var e=Object(a.useContext)(m).state.loggedInUser;if(!e)return o.a.createElement(De,null);var t=Object(Re.createHttpLink)({uri:"https://swaplings.herokuapp.com/graphql"}),n=Object(ke.a)((function(t,n){var r=n.headers,a=e.jwtToken;return{headers:Jn(Jn({},r),{},{authorization:null!=a?a:""})}})),r=new Re.ApolloClient({link:n.concat(t),connectToDevTools:!0,cache:new Re.InMemoryCache({typePolicies:{Query:{fields:{itemUnderConstruction:{read:function(){return Ye()}},matchToHandle:{read:function(){return $e()}},browseItemsByPage:{keyArgs:!1,merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e||!e.pageInfo)return t;var n=e,r=[].concat(c()(n.edges),c()(t.edges));return{edges:r,pageInfo:Jn({},t.pageInfo)}}}}}}})}),i=Object(Je.a)();return o.a.createElement(Re.ApolloProvider,{client:r},o.a.createElement(d.a,null,o.a.createElement(i.Navigator,{screenOptions:{header:function(){return null}}},o.a.createElement(i.Screen,{name:"ScreensWithVisibleTabBar",component:Kn}),o.a.createElement(i.Screen,{name:"Imaging",component:Qe}))))},er=function(e,t){switch(t.type){case r.SET_LOGGED_IN_USER:return{loggedInUser:t.data};default:return Yn(t)}},tr=function(e){var t=e.children,n=Object(a.useReducer)(er,u),r=f()(n,2),i=r[0],c=r[1];return o.a.createElement(m.Provider,{value:{state:i,dispatch:c}},t)},nr=n(328);n(621),t.a=function(){return console.log("HUHUU FROM SWAPLINGS"),o.a.createElement(nr.a,null,o.a.createElement(tr,null,o.a.createElement(Zn,null)))}},442:function(e,t,n){e.exports=n(622)},592:function(e,t,n){e.exports=n.p+"static/media/LOGO.89bd4d4b.png"}},[[442,1,2]]]);
//# sourceMappingURL=app.d764ad9a.chunk.js.map